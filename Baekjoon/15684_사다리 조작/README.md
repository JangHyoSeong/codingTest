# [15684] ì‚¬ë‹¤ë¦¬ ì¡°ì‘

### **ë‚œì´ë„**
ê³¨ë“œ 3
## **ğŸ“ë¬¸ì œ**
ì‚¬ë‹¤ë¦¬ ê²Œì„ì€ Nê°œì˜ ì„¸ë¡œì„ ê³¼ Mê°œì˜ ê°€ë¡œì„ ìœ¼ë¡œ ì´ë£¨ì–´ì ¸ ìˆë‹¤. ì¸ì ‘í•œ ì„¸ë¡œì„  ì‚¬ì´ì—ëŠ” ê°€ë¡œì„ ì„ ë†“ì„ ìˆ˜ ìˆëŠ”ë°, ê°ê°ì˜ ì„¸ë¡œì„ ë§ˆë‹¤ ê°€ë¡œì„ ì„ ë†“ì„ ìˆ˜ ìˆëŠ” ìœ„ì¹˜ì˜ ê°œìˆ˜ëŠ” Hì´ê³ , ëª¨ë“  ì„¸ë¡œì„ ì´ ê°™ì€ ìœ„ì¹˜ë¥¼ ê°–ëŠ”ë‹¤. ì•„ë˜ ê·¸ë¦¼ì€ N = 5, H = 6 ì¸ ê²½ìš°ì˜ ê·¸ë¦¼ì´ê³ , ê°€ë¡œì„ ì€ ì—†ë‹¤.

![ì´ë¯¸ì§€](https://onlinejudgeimages.s3-ap-northeast-1.amazonaws.com/problem/15684/1.png)

ì´ˆë¡ì„ ì€ ì„¸ë¡œì„ ì„ ë‚˜íƒ€ë‚´ê³ , ì´ˆë¡ì„ ê³¼ ì ì„ ì´ êµì°¨í•˜ëŠ” ì ì€ ê°€ë¡œì„ ì„ ë†“ì„ ìˆ˜ ìˆëŠ” ì ì´ë‹¤. ê°€ë¡œì„ ì€ ì¸ì ‘í•œ ë‘ ì„¸ë¡œì„ ì„ ì—°ê²°í•´ì•¼ í•œë‹¤. ë‹¨, ë‘ ê°€ë¡œì„ ì´ ì—°ì†í•˜ê±°ë‚˜ ì„œë¡œ ì ‘í•˜ë©´ ì•ˆ ëœë‹¤. ë˜, ê°€ë¡œì„ ì€ ì ì„  ìœ„ì— ìˆì–´ì•¼ í•œë‹¤.

![ì´ë¯¸ì§€](https://onlinejudgeimages.s3-ap-northeast-1.amazonaws.com/problem/15684/2.png)

ìœ„ì˜ ê·¸ë¦¼ì—ëŠ” ê°€ë¡œì„ ì´ ì´ 5ê°œ ìˆë‹¤. ê°€ë¡œì„ ì€ ìœ„ì˜ ê·¸ë¦¼ê³¼ ê°™ì´ ì¸ì ‘í•œ ë‘ ì„¸ë¡œì„ ì„ ì—°ê²°í•´ì•¼ í•˜ê³ , ê°€ë¡œì„ ì„ ë†“ì„ ìˆ˜ ìˆëŠ” ìœ„ì¹˜ë¥¼ ì—°ê²°í•´ì•¼ í•œë‹¤.

ì‚¬ë‹¤ë¦¬ ê²Œì„ì€ ê°ê°ì˜ ì„¸ë¡œì„ ë§ˆë‹¤ ê²Œì„ì„ ì§„í–‰í•˜ê³ , ì„¸ë¡œì„ ì˜ ê°€ì¥ ìœ„ì—ì„œë¶€í„° ì•„ë˜ ë°©í–¥ìœ¼ë¡œ ë‚´ë ¤ê°€ì•¼ í•œë‹¤. ì´ë•Œ, ê°€ë¡œì„ ì„ ë§Œë‚˜ë©´ ê°€ë¡œì„ ì„ ì´ìš©í•´ ì˜† ì„¸ë¡œì„ ìœ¼ë¡œ ì´ë™í•œ ë‹¤ìŒ, ì´ë™í•œ ì„¸ë¡œì„ ì—ì„œ ì•„ë˜ ë°©í–¥ìœ¼ë¡œ ì´ë™í•´ì•¼ í•œë‹¤.

ìœ„ì˜ ê·¸ë¦¼ì—ì„œ 1ë²ˆì€ 3ë²ˆìœ¼ë¡œ, 2ë²ˆì€ 2ë²ˆìœ¼ë¡œ, 3ë²ˆì€ 5ë²ˆìœ¼ë¡œ, 4ë²ˆì€ 1ë²ˆìœ¼ë¡œ, 5ë²ˆì€ 4ë²ˆìœ¼ë¡œ ë„ì°©í•˜ê²Œ ëœë‹¤. ì•„ë˜ ë‘ ê·¸ë¦¼ì€ 1ë²ˆê³¼ 2ë²ˆì´ ì–´ë–»ê²Œ ì´ë™í–ˆëŠ”ì§€ ë‚˜íƒ€ë‚´ëŠ” ê·¸ë¦¼ì´ë‹¤.

![ì´ë¯¸ì§€](https://onlinejudgeimages.s3-ap-northeast-1.amazonaws.com/problem/15684/3.png) | ![ì´ë¯¸ì§€](https://onlinejudgeimages.s3-ap-northeast-1.amazonaws.com/problem/15684/2.png)|
---------|----------
 1ë²ˆ ì„¸ë¡œì„  | 2ë²ˆ ì„¸ë¡œì„ 

ì‚¬ë‹¤ë¦¬ì— ê°€ë¡œì„ ì„ ì¶”ê°€í•´ì„œ, ì‚¬ë‹¤ë¦¬ ê²Œì„ì˜ ê²°ê³¼ë¥¼ ì¡°ì‘í•˜ë ¤ê³  í•œë‹¤. ì´ë•Œ, ië²ˆ ì„¸ë¡œì„ ì˜ ê²°ê³¼ê°€ ië²ˆì´ ë‚˜ì™€ì•¼ í•œë‹¤. ê·¸ë ‡ê²Œ í•˜ê¸° ìœ„í•´ì„œ ì¶”ê°€í•´ì•¼ í•˜ëŠ” ê°€ë¡œì„  ê°œìˆ˜ì˜ ìµœì†Ÿê°’ì„ êµ¬í•˜ëŠ” í”„ë¡œê·¸ë¨ì„ ì‘ì„±í•˜ì‹œì˜¤.
### **ì…ë ¥**
ì²«ì§¸ ì¤„ì— ì„¸ë¡œì„ ì˜ ê°œìˆ˜ N, ê°€ë¡œì„ ì˜ ê°œìˆ˜ M, ì„¸ë¡œì„ ë§ˆë‹¤ ê°€ë¡œì„ ì„ ë†“ì„ ìˆ˜ ìˆëŠ” ìœ„ì¹˜ì˜ ê°œìˆ˜ Hê°€ ì£¼ì–´ì§„ë‹¤. (2 â‰¤ N â‰¤ 10, 1 â‰¤ H â‰¤ 30, 0 â‰¤ M â‰¤ (N-1)Ã—H)

ë‘˜ì§¸ ì¤„ë¶€í„° Mê°œì˜ ì¤„ì—ëŠ” ê°€ë¡œì„ ì˜ ì •ë³´ê°€ í•œ ì¤„ì— í•˜ë‚˜ì”© ì£¼ì–´ì§„ë‹¤.

ê°€ë¡œì„ ì˜ ì •ë³´ëŠ” ë‘ ì •ìˆ˜ aê³¼ bë¡œ ë‚˜íƒ€ë‚¸ë‹¤. (1 â‰¤ a â‰¤ H, 1 â‰¤ b â‰¤ N-1) bë²ˆ ì„¸ë¡œì„ ê³¼ b+1ë²ˆ ì„¸ë¡œì„ ì„ aë²ˆ ì ì„  ìœ„ì¹˜ì—ì„œ ì—°ê²°í–ˆë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤.

ê°€ì¥ ìœ„ì— ìˆëŠ” ì ì„ ì˜ ë²ˆí˜¸ëŠ” 1ë²ˆì´ê³ , ì•„ë˜ë¡œ ë‚´ë ¤ê°ˆ ë•Œë§ˆë‹¤ 1ì´ ì¦ê°€í•œë‹¤. ì„¸ë¡œì„ ì€ ê°€ì¥ ì™¼ìª½ì— ìˆëŠ” ê²ƒì˜ ë²ˆí˜¸ê°€ 1ë²ˆì´ê³ , ì˜¤ë¥¸ìª½ìœ¼ë¡œ ê°ˆ ë•Œë§ˆë‹¤ 1ì´ ì¦ê°€í•œë‹¤.

ì…ë ¥ìœ¼ë¡œ ì£¼ì–´ì§€ëŠ” ê°€ë¡œì„ ì´ ì„œë¡œ ì—°ì†í•˜ëŠ” ê²½ìš°ëŠ” ì—†ë‹¤.
### **ì¶œë ¥**
ië²ˆ ì„¸ë¡œì„ ì˜ ê²°ê³¼ê°€ ië²ˆì´ ë‚˜ì˜¤ë„ë¡ ì‚¬ë‹¤ë¦¬ ê²Œì„ì„ ì¡°ì‘í•˜ë ¤ë©´, ì¶”ê°€í•´ì•¼ í•˜ëŠ” ê°€ë¡œì„  ê°œìˆ˜ì˜ ìµœì†Ÿê°’ì„ ì¶œë ¥í•œë‹¤. ë§Œì•½, ì •ë‹µì´ 3ë³´ë‹¤ í° ê°’ì´ë©´ -1ì„ ì¶œë ¥í•œë‹¤. ë˜, ë¶ˆê°€ëŠ¥í•œ ê²½ìš°ì—ë„ -1ì„ ì¶œë ¥í•œë‹¤.
### **ì˜ˆì œì…ì¶œë ¥**

**ì˜ˆì œ ì…ë ¥1**

```
2 0 3
```

**ì˜ˆì œ ì¶œë ¥1**

```
0
```

**ì˜ˆì œ ì…ë ¥2**

```
2 1 3
1 1
```

**ì˜ˆì œ ì¶œë ¥2**

```
1
```

**ì˜ˆì œ ì…ë ¥3**

```
5 5 6
1 1
3 2
2 3
5 1
5 4
```

**ì˜ˆì œ ì¶œë ¥3**

```
3
```

### **ì¶œì²˜**

## **ğŸ§CODE REVIEW**

### **ğŸ§¾ë‚˜ì˜ í’€ì´**

```python
import sys

N, M, H = map(int, sys.stdin.readline().rstrip().split())
ladder = [[False] * (N+1) for _ in range(H+1)]
for _ in range(M):
    a, b = map(int, sys.stdin.readline().rstrip().split())
    ladder[a][b] = True

def check():
    for i in range(1, N+1):
        pos = i

        for j in range(1, H+1):
            if ladder[j][pos]:
                pos += 1
            elif pos > 1 and ladder[j][pos - 1]:
                pos -= 1
        
        if pos != i:
            return False
    return True

result = 4

def dfs(count, x, y):
    global result

    if count >= result:
        return

    if check():
        if result > count:
            result = count
        return

    for i in range(x, H+1):
        k = y if i == x else 1
        for j in range(k, N):
            if not ladder[i][j] and not ladder[i][j-1] and not ladder[i][j+1]:
                ladder[i][j] = True
                dfs(count + 1, i, j)
                ladder[i][j] = False

dfs(0, 1, 1)
print(result if result <= 3 else -1)
```

ê²°ê³¼	| ë©”ëª¨ë¦¬(KB) |	ì‹œê°„(ms) |	ì–¸ì–´ |	ì½”ë“œ ê¸¸ì´(B)
:----:|:-----:|:-----:|:-----:|:--------:
ì •ë‹µ|111928|3584|PyPy3|1019
#### **ğŸ“í•´ì„¤**

**ì•Œê³ ë¦¬ì¦˜**
```
1. ë°±íŠ¸ë˜í‚¹
```

### **ë‹¤ë¥¸ í’€ì´**

```python
N, M, H = map(int, input().split())     #  2 â‰¤ N â‰¤ 10, 1 â‰¤ H â‰¤ 30, 0 â‰¤ M â‰¤ (N-1)Ã—H

line = [[0]* (N) for _ in range(H)]

for _ in range(M):
    a, b = map(int, input().split())
    line[a-1][b-1] = 1
    line[a-1][b] = 2


def check():
    same = 0
    for s in range(N):
        now = s
        for j in range(H):
            if line[j][now] == 1: now += 1
            elif line[j][now] == 2: now -= 1
        if now == s: same += 1
    return same


def dfs(n):
    global answer

    if answer != -1:
        return
    
    temp = check()
    if temp+(cnt-n)*2 < N:
        return

    if n == cnt:
        if temp == N:
            answer = cnt
        return
    
    for i in range(H):
        for j in range(N-1):
            if line[i][j] or line[i][j+1]: continue
            line[i][j], line[i][j+1] = 1, 2
            dfs(n+1)
            line[i][j], line[i][j+1] = 0, 0


answer = -1
for cnt in range(4):
    dfs(0)
    if answer != -1: break

print(answer)
```

ì•„ì´ë”” | ë©”ëª¨ë¦¬(KB) |	ì‹œê°„(ms) |	ì–¸ì–´ |	ì½”ë“œ ê¸¸ì´(B) 
:-----:|:-----:|:-----:|:----:|:--------:
ssbin407|31120|36|Python3|983
#### **ğŸ“í•´ì„¤**

```python
import sys

N, M, H = map(int, sys.stdin.readline().rstrip().split())
# ì‚¬ë‹¤ë¦¬ì˜ ìƒíƒœë¥¼ ë‚˜íƒ€ë‚´ëŠ” ì´ì°¨ì› ë¦¬ìŠ¤íŠ¸
# ladder[a][b] : aë²ˆì§¸ ê°€ë¡œì¤„ì— bì™€ b+1 ì‚¬ì´ ìœ„ì¹˜ì— ê°€ë¡œì„ ì´ ìˆìŒ
ladder = [[False] * (N+1) for _ in range(H+1)]
for _ in range(M):
    a, b = map(int, sys.stdin.readline().rstrip().split())
    ladder[a][b] = True

# ëª¨ë“  ì‚¬ë‹¤ë¦¬ê°€ ì›ë˜ ì„¸ë¡œì„ ìœ¼ë¡œ ëŒì•„ì˜¤ëŠ”ì§€ í™•ì¸í•˜ëŠ” í•¨ìˆ˜
def check():
    for i in range(1, N+1):
        pos = i

        for j in range(1, H+1):
            if ladder[j][pos]:
                pos += 1
            elif pos > 1 and ladder[j][pos - 1]:
                pos -= 1
        
        if pos != i:
            return False
    return True

# ìµœëŒ€ê°’ì€ 3ê¹Œì§€ì´ë‹ˆ, ì´ˆê¸°ê°’ì„ 3 ì´ìƒìœ¼ë¡œ ì„¤ì •
result = 4

# DFSë¥¼ í†µí•´ ìµœì†Œê°’ì„ êµ¬í•¨
def dfs(count, x, y):
    global result

    # ë§Œì•½, ì´ë¯¸ ìµœì†Œê°’ì„ ë„˜ê¸´ ì¼€ì´ìŠ¤ë¼ë©´ ê³ ë ¤í•˜ì§€ ì•ŠìŒ
    if count >= result:
        return

    # ì´ë²ˆ íƒìƒ‰ì—ì„œ ì„¸ë¡œì„ ì´ ëª¨ë‘ ì›ë˜ëŒ€ë¡œ ëŒì•„ì˜¨ë‹¤ë©´
    if check():

        # ìµœì†Œê°’ì´ ê°±ì‹  ê°€ëŠ¥í•˜ë‹¤ë©´ ê°±ì‹ 
        if result > count:
            result = count
        return

    # ê°€ë¡œì„ ì„ ì¶”ê°€í•˜ëŠ” ë¡œì§
    for i in range(x, H+1):
        k = y if i == x else 1
        for j in range(k, N):
            if not ladder[i][j] and not ladder[i][j-1] and not ladder[i][j+1]:
                ladder[i][j] = True
                dfs(count + 1, i, j)
                ladder[i][j] = False

dfs(0, 1, 1)
print(result if result <= 3 else -1)
```