# [14267] íšŒì‚¬ ë¬¸í™” 1

### **ë‚œì´ë„**
ê³¨ë“œ 4
## **ğŸ“ë¬¸ì œ**
ì˜ì„ íšŒì‚¬ì—ëŠ” ë§¤ìš° ì¢‹ì€ ë¬¸í™”ê°€ ìˆëŠ”ë°, ë°”ë¡œ ìƒì‚¬ê°€ ì§ì† ë¶€í•˜ë¥¼ ì¹­ì°¬í•˜ë©´ ê·¸ ë¶€í•˜ê°€ ë¶€í•˜ì˜ ì§ì† ë¶€í•˜ë¥¼ ì—°ì‡„ì ìœ¼ë¡œ ì¹­ì°¬í•˜ëŠ” ë‚´ë¦¬ ì¹­ì°¬ì´ ìˆë‹¤. ì¦‰, ìƒì‚¬ê°€ í•œ ì§ì† ë¶€í•˜ë¥¼ ì¹­ì°¬í•˜ë©´ ê·¸ ë¶€í•˜ì˜ ëª¨ë“  ë¶€í•˜ë“¤ì´ ì¹­ì°¬ì„ ë°›ëŠ”ë‹¤.

ëª¨ë“  ì¹­ì°¬ì—ëŠ” ì¹­ì°¬ì˜ ì •ë„ë¥¼ ì˜ë¯¸í•˜ëŠ” ìˆ˜ì¹˜ê°€ ìˆëŠ”ë°, ì´ ìˆ˜ì¹˜ ë˜í•œ ë¶€í•˜ë“¤ì—ê²Œ ë˜‘ê°™ì´ ì¹­ì°¬ ë°›ëŠ”ë‹¤.

ì§ì† ìƒì‚¬ì™€ ì§ì† ë¶€í•˜ê´€ê³„ì— ëŒ€í•´ ì£¼ì–´ì§€ê³ , ì¹­ì°¬ì— ëŒ€í•œ ì •ë³´ê°€ ì£¼ì–´ì§ˆ ë•Œ, ê°ì ì–¼ë§ˆì˜ ì¹­ì°¬ì„ ë°›ì•˜ëŠ”ì§€ ì¶œë ¥í•˜ì‹œì˜¤,
### **ì…ë ¥**
ì²«ì§¸ ì¤„ì—ëŠ” íšŒì‚¬ì˜ ì§ì› ìˆ˜ nëª…, ìµœì´ˆì˜ ì¹­ì°¬ì˜ íšŸìˆ˜ mì´ ì£¼ì–´ì§„ë‹¤. ì§ì›ì€ 1ë²ˆë¶€í„° në²ˆê¹Œì§€ ë²ˆí˜¸ê°€ ë§¤ê²¨ì ¸ ìˆë‹¤. (2 â‰¤ n, m â‰¤ 100,000)

ë‘˜ì§¸ ì¤„ì—ëŠ” ì§ì› nëª…ì˜ ì§ì† ìƒì‚¬ì˜ ë²ˆí˜¸ê°€ ì£¼ì–´ì§„ë‹¤. ì§ì† ìƒì‚¬ì˜ ë²ˆí˜¸ëŠ” ìì‹ ì˜ ë²ˆí˜¸ë³´ë‹¤ ì‘ìœ¼ë©°, ìµœì¢…ì ìœ¼ë¡œ 1ë²ˆì´ ì‚¬ì¥ì´ë‹¤. 1ë²ˆì˜ ê²½ìš°, ìƒì‚¬ê°€ ì—†ìœ¼ë¯€ë¡œ -1ì´ ì…ë ¥ëœë‹¤.

ë‹¤ìŒ mì¤„ì—ëŠ” ì§ì† ìƒì‚¬ë¡œë¶€í„° ì¹­ì°¬ì„ ë°›ì€ ì§ì› ë²ˆí˜¸ i, ì¹­ì°¬ì˜ ìˆ˜ì¹˜ wê°€ ì£¼ì–´ì§„ë‹¤. (2 â‰¤ i â‰¤ n, 1 â‰¤ w â‰¤ 1,000)

ì‚¬ì¥ì€ ìƒì‚¬ê°€ ì—†ìœ¼ë¯€ë¡œ ì¹­ì°¬ì„ ë°›ì§€ ì•ŠëŠ”ë‹¤.
### **ì¶œë ¥**
1ë²ˆë¶€í„° në²ˆì˜ ì§ì›ê¹Œì§€ ì¹­ì°¬ì„ ë°›ì€ ì •ë„ë¥¼ ì¶œë ¥í•˜ì‹œì˜¤.
### **ì˜ˆì œì…ì¶œë ¥**

**ì˜ˆì œ ì…ë ¥1**

```
5 3
-1 1 2 3 4
2 2
3 4
5 6
```

**ì˜ˆì œ ì¶œë ¥1**

```
0 2 6 6 12
```

### **ì¶œì²˜**

## **ğŸ§CODE REVIEW**

### **ğŸ§¾ë‚˜ì˜ í’€ì´**

```python
import sys
from collections import deque

N, M = map(int, sys.stdin.readline().rstrip().split())
arr = [0] + list(map(int, sys.stdin.readline().rstrip().split()))

edges = [[] for _ in range(N+1)]
for i in range(2, N + 1):
    edges[arr[i]].append(i)


score = [0] * (N + 1)
for _ in range(M):
    i, w = map(int, sys.stdin.readline().rstrip().split())
    score[i] += w

q = deque([1])
while q:
    now_node = q.popleft()

    for next_node in edges[now_node]:
        q.append(next_node)
        score[next_node] += score[now_node]

print(" ".join(map(str, score[1:])))
```

ê²°ê³¼	| ë©”ëª¨ë¦¬(KB) |	ì‹œê°„(ms) |	ì–¸ì–´ |	ì½”ë“œ ê¸¸ì´(B)
:----:|:-----:|:-----:|:-----:|:--------:
ì •ë‹µ|134876|192|PyPy3|571
#### **ğŸ“í•´ì„¤**

**ì•Œê³ ë¦¬ì¦˜**
```
1. íŠ¸ë¦¬
2. DP
```

### **ë‹¤ë¥¸ í’€ì´**

```python
import sys
input = sys.stdin.readline

def solve():
    n, m = map(int, input().split())
    boss = [0] + [*map(int, input().split())]
    praise = [0] * (n + 1)
    for _ in range(m):
        i, w = map(int, input().split())
        praise[i] += w
    for i in range(2, n + 1):
        praise[i] += praise[boss[i]]
    print(*praise[1:])

solve()
```

ì•„ì´ë”” | ë©”ëª¨ë¦¬(KB) |	ì‹œê°„(ms) |	ì–¸ì–´ |	ì½”ë“œ ê¸¸ì´(B) 
:-----:|:-----:|:-----:|:----:|:--------:
tkqmfp26|43484|140|Python3
#### **ğŸ“í•´ì„¤**

```python
import sys
from collections import deque

# ì…ë ¥ë°›ê¸°
N, M = map(int, sys.stdin.readline().rstrip().split())
arr = [0] + list(map(int, sys.stdin.readline().rstrip().split()))

# ìƒì‚¬ ê¸°ì¤€, ìì‹ ì˜ ë¶€í•˜ ì§ì›ì´ ëˆ„êµ¬ì¸ì§€ ì €ì¥í•  ë¦¬ìŠ¤íŠ¸
edges = [[] for _ in range(N+1)]

# ë¶€í•˜ì§ì› ì •ë³´ë¥¼ ì €ì¥
for i in range(2, N + 1):
    edges[arr[i]].append(i)


# ì¹­ì°¬ ì ìˆ˜
score = [0] * (N + 1)

# ì¹­ì°¬ì ìˆ˜ ì…ë ¥ë°›ê¸°
for _ in range(M):
    i, w = map(int, sys.stdin.readline().rstrip().split())
    score[i] += w

# ì‚¬ì¥ë¶€í„° ì‹œì‘í•´ì„œ BFS
q = deque([1])

while q:
    now_node = q.popleft()

    # ë¶€í•˜ì§ì›ìœ¼ë¡œ ë‚´ë ¤ê°€ë©´ì„œ ì ìˆ˜ë¥¼ ë”í•´ì¤Œ
    for next_node in edges[now_node]:
        q.append(next_node)
        score[next_node] += score[now_node]

print(" ".join(map(str, score[1:])))
```