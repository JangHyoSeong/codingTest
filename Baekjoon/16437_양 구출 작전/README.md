# [16437] ì–‘ êµ¬ì¶œ ì‘ì „

### **ë‚œì´ë„**
ê³¨ë“œ 3
## **ğŸ“ë¬¸ì œ**
Nê°œì˜ ì„¬ìœ¼ë¡œ ì´ë£¨ì–´ì§„ ë‚˜ë¼ê°€ ìˆìŠµë‹ˆë‹¤. ì„¬ë“¤ì€ 1ë²ˆ ì„¬ë¶€í„° Në²ˆ ì„¬ê¹Œì§€ ìˆìŠµë‹ˆë‹¤.

1ë²ˆ ì„¬ì—ëŠ” êµ¬ëª…ë³´íŠ¸ë§Œ ìˆê³  ë‹¤ë¥¸ ì„¬ì—ëŠ” ì–‘ë“¤ ë˜ëŠ” ëŠ‘ëŒ€ë“¤ì´ ì‚´ê³  ìˆìŠµë‹ˆë‹¤.

ëŠ˜ì–´ë‚˜ëŠ” ëŠ‘ëŒ€ì˜ ê°œì²´ ìˆ˜ë¥¼ ê°ë‹¹í•  ìˆ˜ ì—†ë˜ ì–‘ë“¤ì€ êµ¬ëª…ë³´íŠ¸ë¥¼ íƒ€ê³  ëŠ‘ëŒ€ê°€ ì—†ëŠ” ë‚˜ë¼ë¡œ ì´ì£¼í•˜ê¸°ë¡œ í–ˆìŠµë‹ˆë‹¤.

ê° ì„¬ì—ì„œ 1ë²ˆ ì„¬ìœ¼ë¡œ ê°€ëŠ” ê²½ë¡œëŠ” ìœ ì¼í•˜ë©° ië²ˆ ì„¬ì—ëŠ” pië²ˆ ì„¬ìœ¼ë¡œ ê°€ëŠ” ë‹¤ë¦¬ê°€ ìˆìŠµë‹ˆë‹¤. 

ì–‘ë“¤ì€ 1ë²ˆ ì„¬ìœ¼ë¡œ ê°€ëŠ” ê²½ë¡œë¡œ ì´ë™í•˜ë©° ëŠ‘ëŒ€ë“¤ì€ ì›ë˜ ìˆëŠ” ì„¬ì—ì„œ ì›€ì§ì´ì§€ ì•Šê³  ì„¬ìœ¼ë¡œ ë“¤ì–´ì˜¨ ì–‘ë“¤ì„ ì¡ì•„ë¨¹ìŠµë‹ˆë‹¤. ëŠ‘ëŒ€ëŠ” ë‚ ë µí•˜ê¸° ë•Œë¬¸ì— ì„¬ì— ë“¤ì–´ì˜¨ ì–‘ì„ í•­ìƒ ì¡ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  ëŠ‘ëŒ€ í•œ ë§ˆë¦¬ëŠ” ìµœëŒ€ í•œ ë§ˆë¦¬ì˜ ì–‘ë§Œ ì¡ì•„ë¨¹ìŠµë‹ˆë‹¤.

ì–¼ë§ˆë‚˜ ë§ì€ ì–‘ì´ 1ë²ˆ ì„¬ì— ë„ë‹¬í•  ìˆ˜ ìˆì„ê¹Œìš”?
### **ì…ë ¥**
ì²« ë²ˆì§¸ ì¤„ì— ì„¬ì˜ ê°œìˆ˜ N (2 â‰¤ N â‰¤ 123,456) ì´ ì£¼ì–´ì§‘ë‹ˆë‹¤.

ë‘ ë²ˆì§¸ ì¤„ë¶€í„° N-1ê°œì— ì¤„ì— 2ë²ˆ ì„¬ë¶€í„° Në²ˆ ì„¬ê¹Œì§€ ì„¬ì˜ ì •ë³´ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ti, ai, pi (1 â‰¤ ai â‰¤ 109, 1 â‰¤ pi â‰¤ N) ê°€ ì£¼ì–´ì§‘ë‹ˆë‹¤.

tiê°€ 'W' ì¸ ê²½ìš° ië²ˆ ì„¬ì— ëŠ‘ëŒ€ê°€ aië§ˆë¦¬ê°€ ì‚´ê³  ìˆìŒì„, tiê°€ 'S'ì¸ ê²½ìš° ië²ˆ ì„¬ì— ì–‘ì´ aië§ˆë¦¬ê°€ ì‚´ê³  ìˆìŒì„ ì˜ë¯¸í•©ë‹ˆë‹¤. piëŠ” ië²ˆì§¸ ì„¬ì—ì„œ pië²ˆ ì„¬ìœ¼ë¡œ ê°ˆ ìˆ˜ ìˆëŠ” ë‹¤ë¦¬ê°€ ìˆìŒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.
### **ì¶œë ¥**
ì²« ë²ˆì§¸ ì¤„ì— êµ¬ì¶œí•  ìˆ˜ ìˆëŠ” ì–‘ì˜ ìˆ˜ë¥¼ ì¶œë ¥í•©ë‹ˆë‹¤.
### **ì˜ˆì œì…ì¶œë ¥**

**ì˜ˆì œ ì…ë ¥1**

```
4
S 100 3
W 50 1
S 10 1
```

**ì˜ˆì œ ì¶œë ¥1**

```
60
```

**ì˜ˆì œ ì…ë ¥2**

```
7
S 100 1
S 100 1
W 100 1
S 1000 2
W 1000 2
S 900 6
```

**ì˜ˆì œ ì¶œë ¥2**

```
1200
```

### **ì¶œì²˜**

## **ğŸ§CODE REVIEW**

### **ğŸ§¾ë‚˜ì˜ í’€ì´**

```python
import sys
sys.setrecursionlimit(123456)

N = int(sys.stdin.readline().rstrip())
graph = [[] for _ in range(N+1)]
nodes = [('', 0)] * (N + 1)

for i in range(2, N+1):
    t, a, p = sys.stdin.readline().rstrip().split()
    a, p = int(a), int(p)
    graph[p].append(i)
    nodes[i] = (t, a)

def dfs(node):
    total_sheep = 0
    for child in graph[node]:
        total_sheep += dfs(child)

    t, a = nodes[node]
    if t == 'W':
        if total_sheep > a:
            return total_sheep - a
        
        else:
            return 0
    
    elif t == 'S':
        return total_sheep + a
    else:
        return total_sheep

print(dfs(1))
```

ê²°ê³¼	| ë©”ëª¨ë¦¬(KB) |	ì‹œê°„(ms) |	ì–¸ì–´ |	ì½”ë“œ ê¸¸ì´(B)
:----:|:-----:|:-----:|:-----:|:--------:
ì •ë‹µ|412940|488|PyPy3|644
#### **ğŸ“í•´ì„¤**

**ì•Œê³ ë¦¬ì¦˜**
```
1. DFS
2. íŠ¸ë¦¬
```

### **ë‹¤ë¥¸ í’€ì´**

```python
import sys

n = int(sys.stdin.readline())
indegree = [0] * (n + 1)
par = [0] * (n + 1)
sheep = [0] * (n + 1)

for i in range(1, n):
    t, cnt, nxt = sys.stdin.readline().split()
    cnt = int(cnt)
    nxt = int(nxt)

    if t == 'W':
        cnt *= -1
    
    indegree[nxt] += 1
    sheep[i + 1] = cnt
    par[i + 1] = nxt

que = []
front = 0 
rear = 0

for i in range(n):
    if indegree[i + 1] == 0:
        que.append(i + 1)
        rear += 1

while front < rear:
    cur = que[front]
    nxt = par[cur]
    cnt = sheep[cur]

    front += 1

    sheep[nxt] += max(cnt, 0)
    indegree[nxt] -= 1

    if indegree[nxt] == 0:
        que.append(nxt)
        rear += 1

print(max(sheep[1], 0))
```

ì•„ì´ë”” | ë©”ëª¨ë¦¬(KB) |	ì‹œê°„(ms) |	ì–¸ì–´ |	ì½”ë“œ ê¸¸ì´(B) 
:-----:|:-----:|:-----:|:----:|:--------:
juchan1220|126312|224|PyPy3|694
#### **ğŸ“í•´ì„¤**

```python
import sys
sys.setrecursionlimit(123456)

N = int(sys.stdin.readline().rstrip())

# ìì‹ ë…¸ë“œì˜ ì •ë³´ë¥¼ ì €ì¥
graph = [[] for _ in range(N+1)]

# ê° ë…¸ë“œì— ì–‘, í˜¹ì€ ëŠ‘ëŒ€ê°€ ëª‡ë§ˆë¦¬ì¸ì§€ ì €ì¥
nodes = [('', 0)] * (N + 1)

# ì…ë ¥ë°›ê¸°
for i in range(2, N+1):
    t, a, p = sys.stdin.readline().rstrip().split()
    a, p = int(a), int(p)
    graph[p].append(i)
    nodes[i] = (t, a)

# DFSë¥¼ í†µí•´ ë£¨íŠ¸ë…¸ë“œê¹Œì§€ íƒìƒ‰ í›„ ê°’ì„ í™•ì¸
def dfs(node):
    total_sheep = 0

    # ì¼ë‹¨ ìì‹ ë…¸ë“œë¡œ ê³„ì† ê¹Šê²Œ ë“¤ì–´ê°€ë©° íƒìƒ‰
    for child in graph[node]:
        total_sheep += dfs(child)

    # ë¦¬í”„ë…¸ë“œê¹Œì§€ ì™”ë‹¤ë©´ ì–‘, ëŠ‘ëŒ€ ê°œìˆ˜ë¥¼ ë”í•¨
    t, a = nodes[node]

    # ëŠ‘ëŒ€ì¸ ê²½ìš°
    if t == 'W':

        # ì–‘ì´ ëŠ‘ëŒ€ë³´ë‹¤ ë§ë‹¤ë©´ ê°’ì„ ì¤„ì„
        if total_sheep > a:
            return total_sheep - a
        
        # ëŠ‘ëŒ€ê°€ ì–‘ë³´ë‹¤ ë§ë‹¤ë©´ 0
        else:
            return 0
    
    # ì–‘ì¸ ê²½ìš°
    elif t == 'S':

        # ì–‘ì˜ ê°œìˆ˜ë¥¼ ë”í•¨
        return total_sheep + a
    
    # ë£¨íŠ¸ë…¸ë“œì¸ ê²½ìš° ìµœì¢…ì ìœ¼ë¡œ ë¦¬í„´
    else:
        return total_sheep

# ë£¨íŠ¸ë…¸ë“œë¶€í„° ì‹œì‘
print(dfs(1))
```